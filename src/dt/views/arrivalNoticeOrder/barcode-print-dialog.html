<div class="sale-return-order right-side pr-bg-black3 relative arrivalNotaice-order-dialog"
     ng-controller="arrivalBarcodePrintDialogController"
     ng-init="scopeData={num:1}">

  <script src="http://localhost:8000/CLodopfuncs.js?priority=1"></script>
  <script src="http://localhost:8001/CLodopfuncs.js?priority=2"></script>

  <div class="sale-bg" ng-init="loadCLodop();$root.OPrinter.init()">
      <div class="pd-c-l pdt pdb pr-font-14 color-light-brown sale-boder-btm pr-bg-black2">条码打印预览</div>

      <div id="installNoteDiv" class="mgb-xl pdl-xl mgt-xl" ng-if="notInstallPrintPlusin">
        <i class="fa fa-warning color-red mgr text-n"></i>
        <font>CLodop云打印服务(localhost本地)未安装启动!点击这里<a href='http://113.10.155.131/CLodopPrint_Setup_for_Win32NT.zip' target='_self'>执行安装</a>,安装后请刷新页面。</font>
      </div>

      <div class="pr-panel-height select-bg">
        <!-- 打印份数 -->
        <div class="bb-line-gold pd-c-l pdt pdb">
          <span class="color-white">每个包装打印</span>
          <span>
            <input type="number"
                   class="ipt pr-short-ipt pr-bg-black6 color-white pr-cos-w-50"
                   ng-model="scopeData.num"
                   onKeypress="return(/[\d]/.test(String.fromCharCode(event.keyCode)))">
          </span>
          <span class="color-white">份</span>
        </div>
        <!-- 所有药品的条码列表 -->
        <div class="scroll-out-div">
          <div class="pr-bg-black1 mgb-xl pdb-l"
               ng-repeat="mItem in medicalDataList.orderMedicalNos track by $index"
               ng-controller="barcodePrintDialogItemController"
               ng-init="saveOriginData(mItem)">
            <!-- 药品信息 -->
            <div class="bb-dashed-gold pd-c-l">
              <div class="flex-column pd-v-l">
                <div class="flex-item-6">
                  <span>商品通用名：</span><span class="color-white">{{mItem.name}}</span>
                </div>
                <div class="flex-item-6 text-right">
                  <span>商品编号：</span><span class="color-white">{{mItem.code}}</span>
                </div>
              </div>
              <div class="flex-column pdb-l">
                <div class="flex-item-6">
                  <span>数量：</span>
                  <span class="color-white">
                    <span>{{mItem.converStr}}</span>
                  </span>
                </div>
                <div class="flex-item-6 text-right">
                  <span>批号：</span><span class="color-white">{{mItem.productionBatch}}</span>
                </div>
              </div>
            </div>
            <!-- 药品条码列表 -->
            <div class="pd-c-l" ng-repeat="uItem in mItem.converResults track by $index">
              <!-- 条码图形显示 -->
              <div class="mgt-l mgb-l barcode-show"><img ng-src="{{uItem.barcode}}"></div>
              <!-- 此商品单位条码信息 -->
              <div class="flex-column">
                <div class="flex-item-6">
                  <span class="mgr-xl">
                    <input type="number"
                           class="ipt pr-short-ipt pr-bg-black6 color-white pr-cos-w-80 text-right"
                           ng-model="uItem.unitQuantity"
                           onKeypress="return(/[\d]/.test(String.fromCharCode(event.keyCode)))"
                           ng-change="chgThisUnitQuantity(uItem.unitQuantity,mItem.converResults,$index)">
                    <em class="color-white"> {{uItem.unit}}</em>
                  </span>
                  <span class="color-9" ng-if="($index+1)!==mItem.converResults.length">说明：1{{uItem.unit}} = {{uItem.ratio}}{{uItem.baseUnit}}</span>
                </div>
                <div class="flex-item-6 text-right line-alignment">打印：{{uItem.unitQuantity}}*{{scopeData.num}} = {{uItem.unitQuantity*scopeData.num}}份</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center print-btn pr-bg-black1">
        <button type="button"
                class="pr-btn-save-glodbg mgr-l"
                ng-disabled="!scopeData.num || notInstallPrintPlusin "
                ng-click="barCodePrint('preview')">打印预览
        </button>
        <button type="button"
                class="pr-btn-save-glodbg"
                ng-disabled="!scopeData.num || notInstallPrintPlusin"
                ng-click="barCodePrint('print')">打印
        </button>
      </div>
  </div>
</div>
