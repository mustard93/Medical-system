
        <div class="modal-content" ng-controller="editCtrl"   ajax-url="rest/authen/medicalStock/getOfEdit.json?id={{tr.id}}"  scope-data="formData"
        callback="formData.stockBatchs=formData.stockBatchs||[]"
        >

          <form class="add-medical-form form-horizontal"
                action="rest/authen/medicalStock/save"
                 alert-error
                form-validator>
            <div class="modal-header">
                <button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>
                <h4 class="modal-title">{{formData&&formData.id?"编辑":"添加"}}药械</h4>
            </div>
            <div class="modal-body">

                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">药品名称</label>
                  <div class="col-lg-10 col-sm-10">
                    <input type="text" class="form-control" placeholder="" ng-model="formData.name"
                     auto-complete="rest/data/autocomplete.json?a=1"/>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">首图地址2</label>
                  <div class="col-lg-10 col-sm-10">
                      <img ng-src="{{formData.headUrl}}"  ng-style="{width:80,height:80}">


                        <button type="button" class="btn btn-default" ng-init="upFile={}" upload-type="image"
                                            uploader-one="rest/authen/fileUpload/uploadPicture.json" usege="药械"
                                             up-file="upFile" ng-model="formData.headUrl">

                                                上传图片{{upFile.progress<100?"("+upFile.progress+"%)":""}}
                                            </button>
                    <!-- <input type="text" class="form-control" placeholder="" ng-model="formData.headUrl" /> -->
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">药品单位</label>
                  <div class="col-lg-10 col-sm-10">
                    <select class="ipt pr-short-ipt" data-placeholder="选择单位" chosen default-empty="无" ng-model="formData.unit" select-source="rest/baseData/queryForSelectOptionByType?typeCode=unit">

                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">药品单价</label>
                  <div class="col-lg-10 col-sm-10">
                    <input type="text" class="form-control" placeholder="" ng-model="formData.price" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">药品编码</label>
                  <div class="col-lg-10 col-sm-10">
                    <input type="text" class="form-control" placeholder="" ng-model="formData.code" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">品牌</label>
                  <div class="col-lg-10 col-sm-10">
                    <input type="text" class="form-control" placeholder="" ng-model="formData.brand" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">生产厂家</label>
                  <div class="col-lg-10 col-sm-10">
                    <input type="text" class="form-control" placeholder="" ng-model="formData.manufacturer" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">分类</label>
                  <div class="col-lg-10 col-sm-10">
                    <input type="text" class="form-control" placeholder="" ng-model="formData.category" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">药监编码</label>
                  <div class="col-lg-10 col-sm-10">
                    <input type="text" class="form-control" placeholder="" ng-model="formData.drugAdministrationCode" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">货位</label>
                  <div class="col-lg-10 col-sm-10">
                    <input type="text" class="form-control" placeholder="" ng-model="formData.storageLocation" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">批准文号</label>
                  <div class="col-lg-10 col-sm-10">
                    <input type="text" class="form-control" placeholder="" ng-model="formData.licenseNumber" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">有效期</label>
                  <div class="col-lg-10 col-sm-10">
                    <input type="text" class="form-control" placeholder="" ng-model="formData.guaranteePeriod" />
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">属性</label>
                  <div class="col-lg-10 col-sm-10">
                    <select class="ipt pr-short-ipt" data-placeholder="选择属性" chosen default-empty="无" ng-model="formData.deliveryPlus" select-source="rest/index/queryBasicdataForSelectOption?basicDataType=Basic_DeliveryPlus">

                    </select>
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">规格</label>
                  <div class="col-lg-10 col-sm-10">
                    <select class="ipt pr-short-ipt" data-placeholder="选择规格" chosen default-empty="无" ng-model="formData.specification" select-source="rest/baseData/queryForSelectOptionByType?typeCode=specification">

                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">剂型</label>
                  <div class="col-lg-10 col-sm-10">
                    <select class="ipt pr-short-ipt" data-placeholder="选择剂型" chosen default-empty="无" ng-model="formData.dosageForms" select-source="rest/baseData/queryForSelectOptionByType?typeCode=dosageForms">

                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label">库存</label>
                  <div class="col-lg-10 col-sm-10">
                    <input type="text" class="form-control" placeholder="" ng-model="formData.quantity" />
                  </div>
                </div>


                <div class="form-group"   ng-repeat="item in formData.stockBatchs"  >
                  <label class="col-lg-2 col-sm-2 control-label">批次</label>
                  <div class="col-lg-2 col-sm-2">
                    <input type="text" class="form-control" placeholder="" ng-model="item.productionBatch" />
                  </div>
                  <label class="col-lg-2 col-sm-2 control-label">数量</label>
                  <div class="col-lg-2 col-sm-2">
                    <input type="number" class="form-control" placeholder="" ng-model="item.quantity" />
                  </div>
                  <label class="col-lg-2 col-sm-2 control-label">备注</label>
                  <div class="col-lg-1 col-sm-1">
                    <input type="text" class="form-control" placeholder="" ng-model="item.note" />
                  </div>
                  <span class="col-lg-1 col-sm-1" ng-click="formData.stockBatchs.splice($index,1)">
                    <a href="javascript:;"><i class="fa fa-trash-o pr-color text-l"></i></a>
                  </span>
                </div>
                <span class="block" ng-click="formData.stockBatchs.push({})">
                  <a href="javascript:;">添加批次</a>
                </span>

                <div class="form-group">
                  <label class="col-lg-2 col-sm-2 control-label"></label>
                  <div class="col-lg-10 col-sm-10">
                    <input type="submit" class="btn btn-success" value="提交">
                  </div>
                </div>

            </div>

            </form>
        </div>
