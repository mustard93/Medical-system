<div class="sale-return-order right-side pr-bg-black3">
  <div class="sale-bg">
    <!-- 头部信息 -->
    <div class="relative ">
      <div class="mgb-l pd-c-l pdt pdb pr-font-14 color-light-brown sale-boder-btm">查询</div>
      <div class="pr-panel-height sale-boder-btm select-bg" style="padding:15px 0;">
        <div class="flex-column mgt relative ">
            <label class="flex-item-2 text-right control-label pdr-s">客户</label>
            <span angucomplete-supplier
                  placeholder=""
                  title-field="name"
                  search-fields="{{cacheObject.customerAddress.name}}"
                  url="rest/authen/customerAddress/query.json?isFilterDefault=true"
                  ng-model="cacheObject.customerAddress"
                  ng-model-id="filterObject.customerId"
                  class="inline-block text-s" style="height:28px;">
            </span>
            {{filterObject.customerName}}
        </div>
        <div class="flex-column mgt">
            <label class="flex-item-2 text-right control-label pdr-s">业务部门</label>
            <div class="flex-item-10 text-left">
                <select class="ipt pr-short-ipt ipt-new-s "
                        chosen
                        default-empty="全部"
                        ng-model="filterObject.salesDepartmentId"
                        select-source="rest/authen/department/queryForSelectOption">
                </select>
            </div>
        </div>
        <div class="flex-column mgt">
            <label class="flex-item-2 text-right control-label pdr-s">业务人员</label>
            <div class="flex-item-10 text-left">
                <select class="ipt pr-short-ipt ipt-new-s "
                        data-placeholder=" "
                        chosen
                        default-empty="全部"
                        ng-model="filterObject.saleUserId"
                        select-source="rest/authen/organizationAndUser/queryForSelectOption?departmentId={{filterObject.salesDepartmentId}}&isReturnNullOfNoCondition=true">
                </select>
            </div>
        </div>
        <div class="flex-column mgt">
                <label class="flex-item-2 text-right control-label pdr-s pdt-s">销售起止时间</label>
            <div class="sela-icon-outside" >
                <input type="text"
                       style="color: white;z-index: 15;"
                       datepicker
                       class="ipt-date pr-short-ipt color-6 mgr pr-indent-10"
                       ng-readonly="true"
                       ng-model="filterObject.updateAtBeg">
                <span class="date-icon"></span>
            </div>

            <span class="pdt-s mgl-s mgr-s" style="color: white;">至</span>
            <div class="sela-icon-outside" >
                <input type="text"
                       style="color: white;z-index: 15;"
                       datepicker
                       class="ipt-date pr-short-ipt color-6 mgr pr-indent-10"
                       ng-readonly="true"
                       ng-model="filterObject.updateAtEnd"
                       invalid-popover
                       popover-show="filterObject.updateAtEnd<filterObject.updateAtBeg"
                       popover-options='{"content":"结束日期不应小于开始日期", "placement":"top", "trigger":"manual"}' />
                <span class="date-icon"></span>
            </div>
        </div>
        <div class="flex-column mgt">
                <label class="flex-item-2 text-right control-label pdr-s">业务类型</label>
                <div class="flex-item-10 text-left">
                    <select class="ipt pr-short-ipt ipt-new-s "
                            chosen
                            default-empty="全部"
                            ng-model="filterObject.orderBusinessType"
                            select-source="rest/index/queryBasicdataForSelectOption?basicDataType=Order_OrderBusinessType">
                    </select>

                </div>
            </div>
        <!--销售类型-->
        <div class="flex-column mgt">
                <label class="flex-item-2 text-right control-label pdr-s">销售类型</label>
                <div class="flex-item-10 text-left">
                    <select class="ipt pr-short-ipt ipt-new-s"
                            chosen
                            default-empty="全部"
                            ng-model="filterObject.salesType"
                            select-source="rest/baseData/queryForSelectOptionByType?type=销售类型">

                    </select>
                </div>
            </div>
        <!--商品分类-->
        <div class="flex-column mgt relative">
          <label class="flex-item-2 text-right control-label pdr-s">商品分类</label>
          <div class="flex-item-10 text-left">
            <div class="autocut z-tree-div inline-block fl-l">{{filterObject.medicalAttributeName}}</div>
            <button type="button"
                    z-tree-select="rest/authen/medicalAttribute/query.json?pageSize=999"
                    class="btn-select-dialog fl-l"
                    ng-model="filterObject.medicalAttribute"
                    id-key="id"
                    p-id-key="parentId">选择
             </button>
          </div>
        </div>
        <!--商品通用名-->
        <div class="flex-column mgt relative">
                <label class="flex-item-2 text-right control-label pdr-s">商品通用名</label>
                <div class="flex-item-10 text-left">
                    <span angucomplete-supplier
                          placeholder=""
                          title-field="name"
                          search-fields="{{cacheObject.medicalStock.name}}"
                          url="rest/authen/medicalStock/query"
                          ng-model="cacheObject.medicalStock"
                          ng-model-id="filterObject.medicalApprovedId"
                          class="inline-block text-s" style="height:28px;">
                    </span>
                </div>
            </div>
        <!--商品编码-->
        <div class="flex-column mgt">
                <label class="flex-item-2 text-right control-label pdr-s">商品编码</label>
                <div class="flex-item-10 text-left">
                    <input type="text"
                           class="inline-block mgb color-white pr-indent-5"
                           style="border: 1px solid rgba(0,0,0,.2);width:260px;height:28px;"
                           placeholder=""
                           ng-model="filterObject.medicalCode"
                           auto-complete="rest/index/autoComplete?tableName=Medical.MedicalStock&property=name"/>
                </div>
            </div>
        <!--商品条码-->
        <div class="flex-column mgt">
                <label class="flex-item-2 text-right control-label pdr-s">商品条码</label>
                <div class="flex-item-10 text-left">
                    <input type="text"
                           class="inline-block mgb color-white pr-indent-5"
                           style="border: 1px solid rgba(0,0,0,.2);width:260px;height:28px;"
                           placeholder=""
                           ng-model="filterObject.medicalBarcode">
                </div>
            </div>
        <!--制单部门-->
        <div class="flex-column mgt">
                <label class="flex-item-2 text-right control-label pdr-s">制单部门</label>
                <div class="flex-item-10 text-left">
                    <select class="ipt pr-short-ipt ipt-new-s"
                            chosen
                            default-empty="全部"
                            ng-model="filterObject.departmentId"
                            select-source="rest/authen/department/queryForSelectOption">
                    </select>
                </div>
            </div>
        <!--制单人-->
        <div class="flex-column mgt">
                <label class="flex-item-2 text-right control-label pdr-s">制单人</label>
                <div class="flex-item-10 text-left">
                        <select class="ipt pr-short-ipt ipt-new-s "
                                data-placeholder=" "
                                chosen
                                default-empty="全部"
                                ng-model="filterObject.saleUserId"
                                select-source="rest/authen/organizationAndUser/queryForSelectOption?departmentId={{filterObject.departmentId}}&isReturnNullOfNoCondition=true">
                    </select>
                </div>
            </div>
      </div>
      <div class="mgb-l pd-c-l pdt pdb pr-font-12 color-light-brown sale-boder-btm-2">统计方式设置
          <div class="form-ctrl"
               ajax-url="rest/index/queryBasicdataForSelectOption?basicDataType=Basic_SaleOrderStatisticsGroupEnum"
               scope-data="departments"
               alert-error>
              <fieldset>
                  <label class="sales-selection relative"  ng-repeat="item in departments track by $index" title="{{item.value}}">
                      <input type="checkbox"
                             value="{{item.id}}"
                             ng-checked="judgeHasThisItem(tbodyList,item.value)"
                             ng-click="handleGroupChoised($event,item.value)"
                             class="click-reverse-selection3 mgt-l mgl -m">{{item.value}}
                  </label>
              </fieldset>
          </div>
          <p ng-if="groupFlag" class="color-red pdl-xl">分组条件至少选择一种!</p>
          <p ng-if="yearMonthGroupFlag" class="color-red pdl-xl">不能对月进行单独分组查询，必须带年分组查询!</p>
      </div>
      <!-- 功能按钮 -->
      <div class="sales-btn-area-2nd relative">
          <div class="btn-area full-width text-center">

          <button type="button"
                  ng-click="handleTypeChange()"
                  class="pr-btn-save-glodbg mgr-l"
                  ng-disabled="groupFlag || yearMonthGroupFlag"
                  style="width:160px;">确定
          </button>
          </div>
      </div>
    </div>
  </div>
</div>
