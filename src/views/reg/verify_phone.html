<div class="container" ng-init="errorMsg='';isExist_errorMsg='';sendVerifyCodeCountdown=-1;canRegPhone=false">
  <!-- Logo -->
  <div class="row">
    <div class="col-lg-12 sys-reg-logo"></div>
  </div>
  <!-- 标题 -->
  <div class="row">
    <div class="col-lg-12"><p class="sys-reg-title">注册 - 绑定手机</p></div>
  </div>
  <!-- 提示信息 -->
  <div ng-if="errorMsg||isExist_errorMsg"  class="row">
    <div class="col-lg-12 reg-info-prompt" >
      <div>
        <i class="fa fa-exclamation-triangle"></i>
        <span>{{errorMsg||isExist_errorMsg}}</span>
      </div>
    </div>
  </div>
  <!-- 提交表单 -->

  <div class="reg-wrap" >
    <form name="editForm" class="row form-signin"    onsubmit="return false;" novalidate autocomplete="off"
    action="rest/sms/verifySmsCodey.json"
    form-validator
    scope-error-msg="errorMsg"
    alert-ok
    callback="$root.store.set('remeberNumber',formData.phone);$root.store.set('sendVerificationCode',formData.verifyCode);$root.go('#/reg/send_info.html')"

    >
      <div class="col-lg-12 mgl-l"
      ajax-if-eval="formData.phone.length==11"
      ajax-url="rest/index/user/isExist.json"
      scope-error-msg="isExist_errorMsg"
      params='{"phone":"{{formData.phone}}"}'
      callback="canRegPhone=true"
        >
        <input type="text" class="form-control pd-n" placeholder="手机号码"
              name="phone" ng-model="formData.phone" required autofocus
              ng-pattern="/^1(3|4|5|7|8)\d{9}$/"
                 data-content="请输入11位手机号码"
                   invalid-popover="{{editForm.phone.$invalid}}">
      </div>

      <div class="col-lg-12">
        <span>
          <input type="text" class="form-control pd-n" placeholder="验证码"
                 name="verifyCode" ng-model="formData.verifyCode"
                 ng-maxlength="4" required >
        </span>
        <span interval-countdown>
          <button  ng-if="sendVerifyCodeCountdown<=0"  type="button" class="btn btn-primary btn-sm pr-btn"
                  ajax-url-submit="rest/sms/sendVerificationCode.json"
                  http-method="GET"
                                      params='{"isNewUser":true,"tel":"{{formData.phone}}"}'
                                      scope-error-msg="errorMsg"
                                      callback="countdown('sendVerifyCodeCountdown',60);"
                   ng-disabled="!canRegPhone">{{sendVerifyCodeCountdown<0?"获取验证码":"重发验证码"}}
          </button>
          <button  ng-if="sendVerifyCodeCountdown>0"  type="button" class="btn btn-primary btn-sm pr-btn"
                  disabled="disabled">{{sendVerifyCodeCountdown}} 秒后重发
          </button>
        </span>
      </div>
      <div class="col-lg-12 button-wrap">

          <button type="submit" class="btn btn-lg btn-reg btn-block pr-btn-login mgt-l"
                  ng-disabled="editForm.phone.$invalid || isExist_errorMsg || !formData.verifyCode">下一步</button>

      </div>
      <div class="col-lg-12 text-center cancel mgt-l" style="line-height:40px;">
        <a href="login.html" class="color-custom-orange">返回登陆</a>
      </div>
    </form>
  </div>
</div>
