<div ng-controller="pageCtrl" class="pd-c-xxxl"><!-- pageCtrl-->

  <div class="page-header-info ">

    <p class="mgb bb-line ">
      库存报表 / <em class="color-custom-orange">出入库明细</em>
    </p>

  </div>
  <div class="bb-dashed-line pd-v-l">

      <select class="pr-select select-wd mgr-ls"
        chosen
         ng-model="listParams.warehouseCode"
         default-empty="选择仓库"
         select-source="rest/authen/warehouse/queryForSelectOption">
       </select>

  </div>

<!--body wrapper start-->

<table-list list-data="rest/authen/inoutstockDetail/query.json" class="table table-hover table-striped table-mr table-content" list-params="listParams">
    <div class="mg-m col-lg-12 col-sm-12">
      <!-- <div class="col-lg-1">
        <button type="button" class="btn btn-primary" modal-right="700" modal-scope="this" modal-url="views/role/edit.html">
            <i class="fa fa-plus"></i>新建
        </button>
      </div> -->
      <div class="text-left order-list-search relative order-list-i mgl" ng-init="queryDatePeriod='最近7天'">
        <select class="pr-select select-wd mgr-l" ng-model="queryDatePeriod"
         date-period-select start-time="listParams.createAtBeg" end-time="listParams.createAtEnd">
          <option value="最近7天" >最近7天</option>
          <option  value="最近10天">最近10天</option>
          <option  value="最近一个月">最近一个月</option>
        </select>

          <input type="text"
                 datepicker
                 class="ipt pr-short-ipt color-6 mgr"
                 ng-readonly="true"
                 placeholder="日期"
                 ng-model="listParams.createAtBeg">
           <span class="mgr">至</span>
           <input type="text"
                 datepicker

                 class="ipt pr-short-ipt color-6 mgr-l"
                 ng-readonly="true"
                 placeholder="日期"
                 ng-model="listParams.createAtEnd"/>
                   <select class="pr-select select-wd mgr-l" chosen default-empty="所有单据"
                   ng-model="listParams.type"
                   select-source="rest/index/queryBasicdataForSelectOption?basicDataType=Basic_InoutstockDetailType">

                   </select>


        <input type="text" class="ipt pdr-xl ipt-r-i" placeholder="商品名称/单据编号" ng-model="listParams.q">
        <i></i>

      </div>

    <div class="wrapper">
        <div class="loader" ng-if="status.isLoading">
            <div class="loader-inner pacman">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
        <div ng-if="!status.isLoading">
          <div ng-if="tbodyList.length==0">
            <p class="empty-data text-center"><span class="empty-data-icon"></span></p>
            <p class="text-center">什么也没有</p>
          </div>
            <div ng-if="tbodyList.length">

                <table class="table table-hover table-striped">
                    <thead class="pr-bg-side">
                        <tr>
                            <th>序号</th>
                            <th>单据日期</th>
                            <th>单据类型</th>
                            <th>单据编号</th>
                            <th>仓库</th>
                            <th>商品编号</th>
                            <th>商品名称</th>
                            <th>规格型号</th>
                            <th>注册证号</th>
                            <th>单位</th>
                            <th>数量</th>
                            <th>批号</th>
                            <th>灭菌批号</th>
                            <th>有效期至</th>
                            <th>生产日期</th>
                            <th>备注</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="tr in tbodyList" ng-click="selectThis()" class="td-bordered " ng-class="{'pr-icon-bg-red':tr.refuseQuantity}">
                            <td>{{$index + 1}}</td>
                            <td>{{tr.orderDate | date : 'yyyy-MM-dd'}}</td>
                            <td>{{tr.type}}</td>
                            <td class="color-orange">
                              <a ng-if="tr.type=='采购入库单'" href="#/arrivalNoticeOrder/get.html?id={{tr.orderId}}">
                              {{tr.orderNo}}
                              </a>
                              <a ng-if="tr.type=='采购出库单'" href="#/arrivalNoticeOrder/get.html?id={{tr.orderId}}">
                              {{tr.orderNo}}
                              </a>
                            </td>
                            <td>{{tr.warehouseName}}</td>
                            <td>{{tr.code}}</td>
                            <td>{{tr.medicalStockName}}</td>
                            <td>{{tr.modelType}}</td>
                            <td>{{tr.drugAdministrationCode}}</td>
                            <td>{{tr.unit}}</td>
                            <td ng-if="!tr.refuseQuantity">{{tr.quantity}}</td>
                            <td ng-if="!tr.quantity">{{tr.refuseQuantity}}</td>
                            <td>{{tr.productionBatch}}</td>
                            <td>{{tr.sterilizationBatchNumber}}</td>
                            <td>{{tr.validTill | date : 'yyyy-MM-dd'}}</td>
                            <td>{{tr.productionDate | date : 'yyyy-MM-dd'}}</td>
                            <td>{{tr.note}}</td>
                        </tr>
                    </tbody>
                </table>
                <div class="clearfix ">
                    <div class="fr">
                        <pagination status="status"></pagination>
                    </div>
                </div>
            </div>
        </div>
    </div>
</table-list>
<!--body wrapper end-->
</div>
