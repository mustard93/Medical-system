<div class="content-wrapper invoices-order"
     ajax-url="rest/authen/invoicesOrder/get.json?id={{mainStatus.pageParams.id}}"
     scope-data="showData"
     callback="formData={};formData.id=showData.id"
     alert-error>
  <!-- 主内容头部 -->
  <div class="content-wrapper-heading mgt-m mgb-m">
    <h1 class="pr-title-color pr-font-24">发货单</h1>
  </div>
  <!-- 主内容区域 -->
  <div class="content-wrapper-main pr-bg-white pr-fuzzy-boundary text-s">
    <!-- 单据信息 -->
    <div class="flex-column pd-c-xl pdt-l pdb-l bb-line">
      <div class="flex-item-10">
        <span class="mgr-m">发货单：{{showData.orderNo}}</span>
        <span class="mgr-m">创建时间：{{showData.createAt | date: 'yyyy-MM-dd MM:ss'}}</span>
        <span class="mgr-m">对应订单：2354234324324</span>
        <span>对应出库单：4543534543</span>
      </div>
      <div class="flex-item-2 text-right">
        <span>状态：{{showData.orderStatus}}</span>
      </div>
    </div>
    <!-- 用户信息 -->
    <div class="pd-c-xl pdt-l pdb-l bb-line">
      <p class="flex-column mgb">
        <span class="flex-item-6">客户名：{{showData.address.name}}</span>
        <span class="flex-item-6 text-right"><em class="mgr-m">销售人员：{{showData.saleUser.n}}</em> 期望到货时间：2016-10-30</span>
      </p>
      <p>收货人信息：{{showData.address.name}} {{showData.address.address}} {{showData.address.tel}}</p>
    </div>
    <!-- 商品列表 -->
    <div class="pd-c-xl">
      <!-- 可发货 -->
      <div class="confirm-order bb-line pdb-l">
        <h1 class="pdt-l color-6 text-m pr-fw-500">订购清单</h1>
        <table class="mgt-l pr-table" style="width:100%;table-layout:auto;">
          <thead>
            <th class="text-center">货品编码/货位</th>
            <th class="">药品名称/生产厂家/规格</th>
            <th class="text-center">剂型</th>
            <th class="text-center">单位</th>
            <th class="text-center">数量</th>
            <th class="text-center">批次号</th>
            <th class="text-center">生产日期</th>
            <th class="text-center">有效期</th>
            <th class="text-center">批准文号</th>
            <th class="text-center">药械属性</th>
          </thead>
          <tbody>
            <tr class="tr-interval"><td colspan="9"></td></tr>
            <tr ng-repeat="tr in showData.orderMedicalNos">
              <td class="has-border text-center">
                <p>YF02428</p>
                <p>34-49-OC</p>
              </td>
              <td class="goods-name has-border text-v-t pd-m">
                <div class="relative">
                  <span class="goods-thumbnail inline-block"><img ng-src="{{tr.headUrl}}" alt=""></span>
                  <span class="inline-block">
                    <p class="pdl-l mgb color-6 text-n pr-fw-500"><span>{{tr.name}}</span></p>
                    <p class="pdl-l mgb color-9 text-s"><span>{{tr.manufacturer}}</span></p>
                    <p class="mgt-s color-9 text-s"><span class="mgl-l">{{tr.specification||"无规格"}}</span></p>
                  </span>
                </div>
              </td>
              <td class="has-border text-center text-v-t pd-m">{{'片剂'}}</td>
              <td class="has-border text-center text-v-t pd-m">{{tr.unit || '盒'}}</td>
              <td class="has-border text-center text-v-t pd-m">{{1000}}</td>
              <td class="has-border text-center text-v-t pd-m">{{tr.batchNo}}</td>
              <td class="has-border text-center text-v-t pd-m">{{tr.quantity}}</td>
              <td class="has-border text-center text-v-t pd-m">{{tr.quantity}}</td>
              <td class="has-border text-center text-v-t pd-m">1234</td>
              <td class="has-border text-center text-v-t pd-m">普通</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="pd-v-xl">
        <p>备注：{{showData.note}}</p>
      </div>
    </div>
  </div>
  <!-- 配送信息 -->
  <form id="confirm-invoices-order"
        form-validator
        parameter-body
        action="rest/authen/invoicesOrder/updateDistributionInfo.json"
        alert-error
        alert-ok
        scope-error-msg="errorMsg"
        scope-data="formData"
        callback="submitFormAfter()">

    <div class="panel pr-panel pr-fuzzy-boundary pd-l">
      <h1 class="pdb-l">配送信息</h1>
      <div class="flex-column bb-line text-s">
        <div class="flex-item-3">
          <div class="form-group">
            <label class="mgr">发货方式：</label>
            <span>{{showData.distributionInfo.type}}</span>
          </div>
        </div>
        <div class="flex-item-3">
          <div class="form-group">
            <label class="mgr">原件：</label>
            <span>{{showData.distributionInfo.originalParts}}</span>
          </div>
        </div>
        <div class="flex-item-3">
          <div class="form-group">
            <label class="mgr">散件：</label>
            <span>{{showData.distributionInfo.spareParts}}</span>
          </div>
        </div>
        <div class="flex-item-3">
          <div class="form-group">
            <label class="mgr">备货位：</label>
            <span>{{showData.distributionInfo.storageLocation}}</span>
          </div>
        </div>
      </div>
      <h1 class="pdt-l pdb-l">附件</h1>
      <div class="flex-column text-s">
        <div class="flex-item-7">
          <div class="flex-column">
            <div class="flex-item-6">
              <div class="form-group">
                <label class="mgr">发票：</label>
                <span>{{showData.distributionInfo.invoiceNo}}</span>
              </div>
            </div>
            <div class="flex-item-6">
              <div class="form-group">
                <label class="mgr">检测报告：</label>
                <span>报告01.docx</span>
              </div>
            </div>
          </div>
          <div class="flex-column">
            <div class="flex-item-12">
              <div class="form-group">
                <label class="mgr">备注</label>
                <span>{{showData.distributionInfo.note}}</span>
              </div>
            </div>
          </div>
        </div>
        <div class="flex-item-5">
          <div>
            <img src="images/temp/tiaoxingma.jpg" alt="" style="height:135px;margin-left:100px;width:450px">
          </div>
        </div>
      </div>
      <!-- 物流信息 -->
      <div class="pd-v-l bt-line bb-line mgb-l">
        <h1 class="pd-v">物流信息</h1>
        <div class="flex-column">
          <div class="flex-item-8 text-s">
            <span class="mgr">申通快递：ST001052345345</span>
            <a href="#" class="mgr">编辑</a>
            <a href="#">删除</a>
          </div>
          <div class="flex-item-4 text-right text-s">
            <a href="javascript:;">浏览</a>
          </div>
        </div>
      </div>
      <!-- 提交按钮 -->
      <!-- <div class="pd-c-xl pdb-xxl text-right">
        <span class="mgr-l">
          <button class="pr-btn-save-glodbg"
                  type="submit">保存</button>
        </span>
        <span class="mgr-l">
          <button type="submit"
                  class="pr-btn-create-glodbg"
                  ng-click="handleThisSubmit('提交后,你将无法修改发货单,确认提交?', 'pr-dialog-submit.html', '确认提交发货单?')">提交发货</button>
        </span>
        <span><a href="javascript:;" ng-click="cancelThis('有修改还未保存,是否保存?', 'pr-dialog-return.html', '取消修改?')">返回</a></span>
      </div> -->
      <div class="pd-c-xl pdb-xxl text-right">
        <span class="mgr-l">
          <!-- <button class="pr-btn-save-glodbg"
                  type="submit"
                  ng-click="handleThisSubmit('确认通知库房发货?此操作会同时打印发货单',
                                             'pr-dialog-submit.html',
                                             '确认发货?',
                                             '#/invoicesOrder/confirm-invoices-order.html?id='+showData.id)">确认发货</button> -->
          <button class="pr-btn-save-glodbg"
                  type="button"
                  handle-this-click
                  dialog-title="确认发货?"
                  dialog-content="确认通知库房发货?此操作会同时打印发货单"
                  dialog-template="pr-dialog-submit.html"
                  request-url="rest/authen/invoicesOrder/updateStatus.json?id={{mainStatus.pageParams.id}}&orderStatus=已发货"
                  call-back="goTo('#/invoicesOrder/invoices-order-done.html')">确认发货</button>
        </span>
        <span class="mgr-l"><a href="#">驳回</a></span>
      </div>
    </div>

  </form>
</div>
