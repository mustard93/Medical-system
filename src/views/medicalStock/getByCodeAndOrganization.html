<div ng-controller="pageCtrl"
     class="pd-c-xxxl left-se-side-par "><!-- pageCtrl-->
  <div ng-controller="MedicalStockController" class="page-main-content left-se-side-par">
    <!--body wrapper start-->
    <!-- 表格start   -->
    <table-list list-data="rest/authen/medicalStock/queryStockBatch?relMedicalStockId={{mainStatus.pageParams.relMedicalStockId}}"
                list-params="listParams"
                search-mode="noCaseSensitive"
                search-param="q">

      <div class="pd-c-xxl mgrl"
      ajax-url="rest/authen/medicalStock/get.json?id={{mainStatus.pageParams.relMedicalStockId}}"
      scope-data="showData"
      alert-error
      >

           <div class="page-header-info">
             <p class="mgb bb-line relative  pdb-s">
               <a href="#/medicalStock/query-stock.html" class="mgr-xl">
                <span class="circle ">
                     <span class="pr-arrow-l"></span>
                </span>
             </a>
               <em class="mgl">库存报表 </em>/ <em class="color-custom-orange">库存查询</em> /
               <em >库存明细</em>
             </p>
             <p ajax-url="rest/authen/warehouse/getByCodeAndOrganizationId?code={{urlInfo.search.warehouseCode}}" scope-data="warehouseName">
               <em>仓库：</em>
               <em ng-if="warehouseName.name">{{warehouseName.name}}</em>
               <em ng-if="!warehouseName.name">全部</em>
             </p>
               <h1 class="color-black text-l mgt">{{showData.name}}</h1>
           </div>

           <div class="content-wrapper-main mgt">
             <div class="pd-c"
             >
              <!-- 搜索框 start-->
             <div class="text-left order-list-search relative">
                <!-- <input type="text" class="ipt pdr-xxl" placeholder="客户名/订单编号/负责人" ng-model="listParams.q"> -->
                 <input type="text" class="ipt pdr-xxl" placeholder="批号/灭菌批号" ng-model="listParams.q">
                 <i class=""></i>
             </div>
               <!-- 搜索框 end-->
              <!-- 主内容头部 -->
              <div class="content-wrapper-heading h-l mgb-m mgt-m pdb-s mgr relative">
              <!-- 主内容区域 -->
              <div class="content-wrapper-main">
                <div ng-if="!status.isLoading">
                  <div ng-if="tbodyList.length==0">
                    <p class="empty-data text-center"><span class="empty-data-icon"></span></p>
                    <p class="text-center">什么也没有</p>
                  </div>

                  <div class="pd-c">
                    <table ng-if="tbodyList.length" class="table table-hover table-striped table-mr table-bordered table-content">
                      <thead class="pr-bg-side">
                        <tr>
                          <th>序号</th>
                          <th>仓库编码</th>
                          <th>仓库名称</th>
                          <th>商品编号</th>
                          <th>商品代码</th>
                          <th>商品名称</th>
                          <th>规格型号</th>
                          <th>商品分类编码</th>
                          <th>商品分类名称</th>
                          <th>单位</th>
                          <th>注册证号</th>
                          <th>批号</th>
                          <th>灭菌批号</th>
                          <th>生产日期</th>
                          <th>保质期</th>
                          <th>有效期至</th>
                          <th>可用数量</th>
                          <th>现存数量</th>
                          <th>其中冻结数量</th>
                          <th>其中锁定数量</th>
                          <th>其中待处理数量</th>
                          <th>到货/在检数量</th>
                          <th>采购在途数量</th>
                          <th>已请购数量</th>
                          <th>预计入库数量</th>
                          <th>销售订单数量</th>
                          <th>代发货数量</th>
                          <th>预计出库数量</th>

                        </tr>
                      </thead>
                      <tbody class="pr-bg-white">
                        <tr ng-repeat="tr in tbodyList track by $index" >
                          <td>{{$index + 1}}</td>
                          <td>{{showData.warehouseStocks.code}}</td>
                          <td>{{showData.warehouseName}}</td>
                          <td>{{showData.code}}</td>
                          <td></td>
                          <td>{{showData.name}}</td>
                          <td>{{showData.specification}}</td>
                          <td></td>
                          <td></td>
                          <td>{{showData.unit}}</td>
                          <td>{{showData.stockModel.drugAdministrationCode}}</td>
                          <!--
                          <td>{{showData.code}}</td>
                          <td class="text-ellips-s">{{showData.name}}</td>
                          <td>{{showData.specification}}</td>
                          <td>{{showData.unit}}</td>
                          <td>{{showData.drugAdministrationCode}}</td>
                           -->
                          <td>{{tr.productionBatch}}</td>
                          <td>{{tr.sterilizationBatchNumber}}</td>
                          <td>{{tr.productionDate  | date:'yyyy-MM-dd'}}</td>
                          <td></td>
                          <td>{{tr.validTill | date:'yyyy-MM-dd'}}</td>

                          <td>{{showData.quantity}}</td>
                          <td>{{tr.stockModel.actualQuantity}}</td>
                          <td>{{tr.stockModel.freezeQuantity}}</td>
                          <td>{{tr.stockModel.lockingQuantity}}</td>
                          <td>{{tr.stockModel.handleQuantity}}</td>
                          <td>{{tr.stockModel.beingCheckedQuantity}}</td>
                          <td>{{tr.stockModel.purchaseInWayQuantity}}</td>
                          <td>{{tr.stockModel.purchaseRequisitionQuantity}}</td>
                          <td>{{tr.stockModel.inStockQuantity}}</td>
                          <td>{{tr.stockModel.confirmOrderQuantity}}</td>
                          <td>{{tr.stockModel.shippedQuantity}}</td>
                          <td>{{tr.stockModel.outStockQuantity}}</td>

                        </tr>
                        <tr class="bgco-orange color-white"   ng-init="totalObj=$root.utils.sumTotalByArray(tbodyList,['quantity'])">
                          <td colspan="11" class="text-right">合计：</td>
                          <td>{{totalObj.quantity}}</td>
                          <td>{{showData.price*tbodyList.length}}</td>
                          <td>{{showData.price*totalObj.quantity}}</td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                        </tr>
                      </tbody>
                    </table>

                    <!-- 分页 -->
                    <div class="clearfix">
                        <div class="fr">
                            <pagination status="status"></pagination>
                        </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- 主体内容 end -->
             </div>
            </div>
           </div>


         </div>
      </table-list>
      <!-- 表格end -->
  </div>
</div>




<!-- 表格 end -->
